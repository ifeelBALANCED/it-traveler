commit-msg:
  parallel: true
  commands:
    commitlint:
      run: bunx --no-install commitlint --edit

pre-commit:
  parallel: true
  commands:
    lint:
      glob: '*.{js,jsx,ts,tsx,vue}'
      run: bun run lint {staged_files}
    pretty:
      glob: '*.{js,jsx,ts,tsx,vue}'
      run: bun run format
      # TODO add test for unit and e2e
#    test:
#        run: bun run test

post-merge:
  commands:
    "check dependencies":
      run: |
        # Check if the bun.lock file changed between the previous and current HEAD.
        if git diff --name-only HEAD@{1} HEAD | grep -E 'bun.lock'; then
          echo "Detected changes in dependencies, running bun install..."
          bun install
        else
          echo "No dependency changes detected, skipping bun install."
        fi
